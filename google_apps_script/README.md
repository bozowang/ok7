# Google Apps Script 代理伺服器設定指南

本指南將說明如何使用 Google Apps Script 部署一個安全的伺服器端代理。此代理將處理對 Gemini API 的請求，確保您的 API 金鑰安全且不會暴露在客戶端應用程式中。

## 部署步驟

1.  **建立新的 Apps Script 專案：**
    *   前往 [Google Apps Script 資訊主頁](https://script.google.com/home/my)。
    *   點擊 **新增專案**。
    *   為您的專案命名，例如：「Gemini 美食外送代理」。

2.  **加入代理程式碼：**
    *   刪除 `Code.gs` 檔案中的預設內容。
    *   複製此目錄中 `proxy.gs` 檔案的全部內容，並貼到 `Code.gs` 中。
    *   儲存專案（點擊磁碟圖示或按 `Ctrl+S`）。

3.  **安全地儲存您的 API 金鑰：**
    *   在左側選單中，點擊 **專案設定**（齒輪圖示 ⚙️）。
    *   向下捲動到 **指令碼屬性 (Script Properties)** 區段。
    *   點擊 **新增指令碼屬性**。
    *   在 **屬性 (Property)** 欄位中，輸入 `API_KEY`。
    *   在 **值 (Value)** 欄位中，貼上您實際的 Google Gemini API 金鑰。
    *   點擊 **儲存指令碼屬性**。

4.  **部署為 Web 應用程式：**
    *   在編輯器右上角，點擊 **部署** 按鈕，然後選擇 **新增部署作業**。
    *   點擊「選取類型」旁邊的齒輪圖示，然後選擇 **網頁應用程式**。
    *   在設定區段中：
        *   **說明：** （可選）輸入描述，例如「Gemini 美食 App 代理」。
        *   **執行身分：** 選擇 **我**。
        *   **誰可以存取：** 選擇 **任何人**。
    *   點擊 **部署**。

5.  **授權指令碼：**
    *   Google 會要求您授權指令碼的權限。
    *   點擊 **授權存取權**。
    *   選擇您的 Google 帳戶。
    *   您可能會看到「Google 尚未驗證這個應用程式」的警告。這對於您自己的指令碼是正常的。點擊 **進階**，然後點擊 **前往 [您的專案名稱] (不安全)**。
    *   檢閱權限（它會要求連線至外部服務）並點擊 **允許**。

6.  **取得 Web 應用程式網址：**
    *   成功部署後，會出現一個對話框，其中包含您的 **Web 應用程式網址**。
    *   點擊 **複製** 按鈕以複製此網址。這是您的前端應用程式將呼叫的端點。

7.  **更新前端程式碼：**
    *   在您的專案中打開 `services/geminiService.ts` 檔案。
    *   找到這一行：`const APPS_SCRIPT_URL = '...';`
    *   將複製的 Web 應用程式網址貼到引號中。
    *   儲存檔案。

您的應用程式現在已設定為透過您的 Google Apps Script 代理安全地使用 Gemini API！
